---
# layout: post
layout: myPost
title:  "IE浏览器多行文字溢出显示省略号"
date:   2020-10-19 21:24:08 +0800
categories: "CSS黑科技"
---

# IE浏览器多行文字溢出显示省略号
- 在日常编写页面中，我们经常遇到内容行数过多时，需要出现 “省略号” 来处理但是又要考虑IE浏览器或IE内核浏览器的兼容性
- 说明：在行高不确定的情况下无法使用此方法
- 文本所在的dom用了花里胡哨的背景图的可以尝试使用此方法

## 标准浏览器的多行文字溢出显示省略号
```css
.myDiv {
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 3;/* 几行 */
  -webkit-box-orient: vertical;
}
```
- ie并不识别 `-webkit-` ，即使在书写css时去点 `-webkit-` ，ie也不支持那些属性

## IE兼容版
- 后面有详细介绍

```html
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IE浏览器多行文字溢出显示省略号</title>
  <style>
    .myDiv {
      background-color: aquamarine;
      width: 280px;
      margin: 100px auto;

      line-height: 20px;
      max-height: 60px;/* 最多显示三行 */

      overflow: hidden;
      position: relative;
    }

    .myDiv:after {
      content: "...";/* 在所在dom内的末尾插入的内容 */

      position: absolute;
      bottom: 0;
      right: 0;

      width: 30px;
      text-align: right;
      background-image: linear-gradient(to right, transparent , aquamarine 50%, aquamarine);
    }
  </style>
</head>

<body>
  <div class="myDiv">在日常编写页面中，我们经常遇到内容行数过多时，需要出现 “省略号” 来处理。但是又要考虑IE浏览器或IE内核浏览器的兼容性。</div>
</body>

</html>
```
- 效果图
  ![]({{ site.url }}/assets/img/IE浏览器多行文字溢出显示省略号.png)
  在谷歌浏览器里面也一样，完全通用。

## 详细说明
### CSS:after 选择器
- 在dom元素**内**的内容之后插入新内容
- 兼容目前所有主流浏览器
- **对于 IE8 及更早版本中的 :after，必须声明 `<!DOCTYPE>`**
- 这个属性平时不怎么用，也就在解决高度塌陷时能用得到
```css
/* 解决高度塌陷 */
.myDiv:after {
  content:""; 
  display: block; 
  clear:both; 
}
```
### 知道了:after选择器后
- 首先得知道文字的行高设置，然后根据行高去设置dom的高度
  - 推荐使用 `max-height` 属性设置高度
```css
.myDiv {
  line-height: 20px;
  max-height: 60px;/* 最多显示三行 */
}
```
- 然后 `myDiv` 设置 `overflow: hidden;` ，让其溢出的隐藏
- 再在 `myDiv` **内**的内容末尾插入 `...` ，即：
```css
.myDiv:after {
  content: "...";
}
```
注意，这里说的**末尾**并不是说就在右下方的，因 `myDiv` 设置了 `overflow: hidden;` ，所以可能并看不到 `...` 
- 然后将 `...` 定位到 `myDiv` 右下方
```css
.myDiv {
  position: relative;
}
.myDiv:after {
  position: absolute;
  bottom: 0;
  right: 0;
}
```
直接绝对定位到右下方即可
- 设置 `.myDiv:after` 宽度、文本靠左和背景渐变色，背景渐变色颜色要和dom背景颜色一样
  - 注意：设置背景渐变色时用的是 `background-image` 属性，并不是 `background-color`
  - 实测，背景渐变色可以兼容到IE10及以上，即使加上前缀也不兼容(无效属性)
  - 若兼容IE10以下，可以用渐变的背景图片代替，可以兼容到IE8及以上，IE8以下不兼容
    - 发现在IE8以下的版本，`:after` 并未生效，但网上的教程全部都说，只要声明 `<!DOCTYPE>` 即可使用
    - 怀疑我的浏览器和正常的IE低版本浏览器有差异(IE11自带的版本切换)
    - <!-- 或者网上的教程都错了？？ -->
  - 推荐 `.myDiv:after` 中间只写一个 `:` ，发现若两个冒号的话，连IE8都不支持了
```css
.myDiv:after {
  width: 30px;
  text-align: right;
  background-image: linear-gradient(to right, transparent , aquamarine 50%, aquamarine);/* transparent 透明色 */
}
```
兼容性这么差，为啥非要设置背景渐变的这步哩？直接看图：
  ![]({{ site.url }}/assets/img/IE浏览器多行文字溢出显示省略号2.png)
发现啥了吧
- 最后，全部样式代码：
```css
.myDiv {
  background-color: aquamarine;
  width: 280px;
  margin: 100px auto;

  line-height: 20px;
  max-height: 60px;/* 最多显示三行 */

  overflow: hidden;
  position: relative;
}
.myDiv:after {
  content: "...";/* 在所在dom内的末尾插入的内容 */

  position: absolute;
  bottom: 0;
  right: 0;

  width: 30px;
  text-align: right;
  background-image: linear-gradient(to right, transparent , aquamarine 50%, aquamarine);/* transparent 透明色 */
}
```
- 注：在用了此方法后，就不要再用标准浏览器的方法了，不然，在标准浏览器中查看，会有俩省略号(六个点)

**转载请说明出处**